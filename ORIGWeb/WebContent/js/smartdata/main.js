var SmartInitializer={templateId:"OverrideThis",images:[],fields:{},container:"",init:function(a,t,e,i){this.templateId=a,this.container=$(e),a?this.populateAsyncImages(a,t,i):this.displayErrorMessage("Template ID is not valid")},populateAsyncImages:function(a,t,e){$.ajax({url:"/ORIGWeb/rest/controller/smartdata/api/data",type:"POST",data:JSON.stringify({templateId:a,images:t}),cache:!1,contentType:"application/json; charset=utf-8",error:function(t,e){console.log(t.responseText),SmartInitializer.displayErrorMessage("Unable to retrieve smart images with templateId : "+a)},success:function(a,t,i){var r=a.images,n=a.fields;SmartInitializer.images=SmartInitializer.mapSmartImage(r),SmartInitializer.fields=SmartInitializer.mapSmartField(n),SmartInitializer.images&&SmartInitializer.fields&&SmartInitializer.buildSmartDataEnvironment(),$.isFunction(e)&&e()}})},buildSmartDataEnvironment:function(){var a={images:this.images,fields:this.fields,smartField:":input:not(button), .selectize-input, .input-group-addon",sensitiveSmartField:!1};console.log("SmartData Options : ",a),this.container.smartData(a)},mapSmartImage:function(a){if(a){for(var t=[],e=0,i=a.length;e<i;e++){var r=a[e],n={pageNo:r.smartPageNo,url:r.imgpath,thumbnailUrl:r.imgthumbpath,docTypeId:r.doctypeid,docTypeDesc:r.docTypeDesc,personalTypeDesc:r.personalTypeDesc,archetypeWidth:r.naturalWidth,archetypeHeight:r.naturalHeight,printable:r.print};t.push(n)}return t}},mapSmartField:function(a){if(a){for(var t={},e=0,i=a.length;e<i;e++){var r=a[e],n={pageNo:r.pagenumber,canvas:{left:r.canvasLeft,top:r.canvasTop,width:r.canvasWidth,height:r.canvasHeight,naturalWidth:r.canvasNaturalWidth,naturalHeight:r.canvasNaturalHeight},selectBox:{x:r.boxX,y:r.boxY,width:r.boxWidth,height:r.boxHeight,rotate:r.boxRotate,scaleX:r.boxScaleX,scaleY:r.boxScaleY}};t[r.fieldid]=n}return t}},displayErrorMessage:function(a){this.container,$("<div>").css({padding:"5px",margin:"300px 50px 0",border:"2px dashed red","border-radius":"10px 10px 10px"})}};