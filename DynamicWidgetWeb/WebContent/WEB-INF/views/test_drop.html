<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>

<!-- start: Meta -->
<meta charset="utf-8" />
<title>Bootstrap Test Dashboard by TOP</title>
<meta name="description" content="Bootstrap Metro Dashboard" />
<meta name="author" content="Topkung" />
<meta name="keyword" content="Metro, Metro UI, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina" />
<!-- end: Meta -->

<!-- start: Mobile Specific -->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- end: Mobile Specific -->

<!-- start: CSS -->
<link id="bootstrap-style" href="css/bootstrap.min.css" rel="stylesheet" th:href="@{/resources/bootstrap/css/bootstrap.min.css}" />
<link href="css/bootstrap-responsive.min.css" rel="stylesheet" th:href="@{/resources/bootstrap/css/bootstrap-responsive.min.css}" />
<link id="base-style" href="css/style.css" rel="stylesheet" th:href="@{/resources/bootstrap/css/style.css}" />
<link id="base-style-responsive" href="css/style-responsive.css" rel="stylesheet" th:href="@{/resources/bootstrap/css/style-responsive.css}" />
<link th:href="@{/resources/bootstrap/css/bootstrap.fonts.css}" rel='stylesheet' type='text/css' />
<!-- end: CSS -->


<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
	  	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<link id="ie-style" href="css/ie.css" rel="stylesheet">
	<![endif]-->

<!--[if IE 9]>
		<link id="ie9style" href="css/ie9.css" rel="stylesheet">
	<![endif]-->

<!-- start: Favicon -->
<link rel="shortcut icon" href="img/favicon.ico" th:href="@{/resources/bootstrap/img/favicon.ico}" />
<!-- end: Favicon -->
<!-- <link href="/resources/css/jquery-ui.css" rel="stylesheet" media="screen" th:href="@{/resources/css/jquery-ui.css}" /> -->
<script src="/resources/js/jquery-2.1.3.js" th:src="@{/resources/js/jquery-2.1.3.js}"></script>
<script src="/resources/js/jquery-ui.js" th:src="@{/resources/js/jquery-ui.js}"></script>
<style>
#sidebar-left.drag-drop {
	padding: 25px;
	/* 	overflow: scroll; */
}

div.draggable {
	margin: 15px;
	-webkit-transition-duration: 0s;
	z-index: 9e3;
}

div.casvas {
	margin: 20px;
	border: thin;
	min-height: 300px;
	padding: 20px;
}

div.dropped {
	-webkit-transition-duration: 0s;
	-webkit-transition-property: none;
	/* 	margin: 20px; */
}
</style>
</head>
<body>
<!-- 		<div class="container-fluid-full"> -->
<!-- 			<div th:replace="fragments/wg_container :: lane(${dashboard.lanes})"></div> -->
<!-- 		</div> -->


	<div class="container-fluid-full">
		<div class="row-fluid">

			<!-- start: Main Menu -->
			<div th:replace="admin/module/fm_adm_dash_component :: drag-drop"></div>
			<!-- end: Main Menu -->

			<noscript>
				<div class="alert alert-block span10">
					<h4 class="alert-heading">Warning!</h4>
					<p>
						You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a> enabled to use this site.
					</p>
				</div>
			</noscript>

			<!-- 			Start Main Content -->
			<div id="content" class="span10">
			<div class="row-fluid">	
				<div class="box span12">
					<div class="box-header">
						<h2>
							<i class="halflings-icon hand-top"></i><span class="break"></span>Dash Board Configuration Canvas, URL = /Widget/dashboard/DE1_1_TEAM
						</h2>
					</div>
					<div class="canvas droppable box-content" style="min-height: 300px;"></div>
					<script th:inline="javascript">
						//<![CDATA[

						var spanElement = null;
						$('.droppable').droppable(
						{
							activeClass : "ui-state-default",
							hoverClass : "ui-state-hover",
							accept : ":not(.ui-sortable-helper)",
							drop : function(event, ui) {
								$(this).find(".placeholder").remove();
								$("<div class='quick-button-small span2 dropped'></div>").html(ui.draggable.html()).appendTo(this)
								.dblclick(function() {
									spanDiag.dialog("open");
									spanElement = $(this);
								});
							}
						}).sortable({
							items : ".dropped"
						})

						var spanDiag = null;
						$(function() {
							spanDiag = $('#dialog').dialog({
								autoOpen : false,
								height : 100,
								width : 450
							});

						});

						//]]>
					</script>
				</div>
				</div>
				<div class="row-fluid">	
				<div class="box span12">
					<div class="box-header">
						<h2>
							<i class="halflings-icon hand-top"></i><span class="break"></span>Drag Here to Remove
						</h2>
					</div>
					<div class="canvas removeable box-content" style="min-height: 100px;"></div>
					<script th:inline="javascript">
					//<![CDATA[
						$('.removeable').droppable({
							activeClass : "ui-state-default",
							hoverClass : "ui-state-hover",
							accept: ".dropped",
							drop : function(event, ui) {
								$(ui.draggable).remove();
								var widgetName = $(ui.draggable).find('p').text();
								notifySuccess('Remove widget '+widgetName+' sucessfully!', true);
							}
						})
						//]]>
					</script>
				</div>
				</div>
			</div>
			<!-- 			End Main Content -->
		</div>
	</div>
	<div id="dialog" style="z-index: 500;">
		<input type="text" value="2" id="span_len" />
		<button id="submit_span">Submit</button>
		<button id="delete_span">Delete</button>
	</div>

	<!-- start: JavaScript-->
	<div th:replace="fragments/inc_javascript :: admin"></div>
	<script th:inline="javascript">
		//<![CDATA[
		(function($) {

			$.fn.alterClass = function(removals, additions) {

				var self = this;

				if (removals.indexOf('*') === -1) {
					// Use native jQuery methods if there is no wildcard matching
					self.removeClass(removals);
					return !additions ? self : self.addClass(additions);
				}

				var patt = new RegExp('\\s'
						+ removals.replace(/\*/g, '[A-Za-z0-9-_]+').split(' ')
								.join('\\s|\\s') + '\\s', 'g');

				self.each(function(i, it) {
					var cn = ' ' + it.className + ' ';
					while (patt.test(cn)) {
						cn = cn.replace(patt, ' ');
					}
					it.className = $.trim(cn);
				});

				return !additions ? self : self.addClass(additions);
			};

		})(jQuery);
		$('#submit_span').click(function() {
			var spanVal = $('#span_len').val();
			spanElement.alterClass('span*', '');
			spanElement.addClass('span' + spanVal);
			spanElement.find('.notification').text(spanVal);
			spanDiag.dialog('close');
		});
		$('#delete_span').click(function() {
			var spanVal = $('#span_len').val();
			spanElement.remove();
			spanDiag.dialog('close');
		});
		//]]>
	</script>
	<!-- end: JavaScript-->
</body>

</html>